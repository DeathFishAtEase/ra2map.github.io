<!doctype html>
<html>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width initial-scale=1'>

    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext'
        rel='stylesheet' type='text/css' />
    <style type='text/css'>
        html {
            overflow-x: initial !important;
        }

        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --select-text-bg-color: #B5D6FC;
            --select-text-font-color: auto;
            --monospace: "Lucida Console", Consolas, "Courier", monospace;
            --title-bar-height: 20px;
        }

        .mac-os-11 {
            --title-bar-height: 28px;
        }

        html {
            font-size: 14px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        body {
            margin: 0px;
            padding: 0px;
            height: auto;
            inset: 0px;
            font-size: 1rem;
            line-height: 1.42857;
            overflow-x: hidden;
            background: inherit;
            tab-size: 4;
        }

        iframe {
            margin: auto;
        }

        a.url {
            word-break: break-all;
        }

        a:active,
        a:hover {
            outline: 0px;
        }

        .in-text-selection,
        ::selection {
            text-shadow: none;
            background: var(--select-text-bg-color);
            color: var(--select-text-font-color);
        }

        #write {
            margin: 0px auto;
            height: auto;
            width: inherit;
            word-break: normal;
            overflow-wrap: break-word;
            position: relative;
            white-space: normal;
            overflow-x: visible;
            padding-top: 36px;
        }

        #write.first-line-indent p {
            text-indent: 2em;
        }

        #write.first-line-indent li p,
        #write.first-line-indent p * {
            text-indent: 0px;
        }

        #write.first-line-indent li {
            margin-left: 2em;
        }

        .for-image #write {
            padding-left: 8px;
            padding-right: 8px;
        }

        body.typora-export {
            padding-left: 30px;
            padding-right: 30px;
        }
/*
        .typora-export .footnote-line,
        .typora-export li,
        .typora-export p {
            white-space: pre-wrap;
        }
*/
        .typora-export .task-list-item input {
            pointer-events: none;
        }

        @media screen and (max-width: 500px) {
            body.typora-export {
                padding-left: 0px;
                padding-right: 0px;
            }

            #write {
                padding-left: 20px;
                padding-right: 20px;
            }

            .CodeMirror-sizer {
                margin-left: 0px !important;
            }

            .CodeMirror-gutters {
                display: none !important;
            }
        }

        #write li>figure:last-child {
            margin-bottom: 0.5rem;
        }

        #write ol,
        #write ul {
            position: relative;
        }

        img {
            max-width: 100%;
            vertical-align: middle;
            image-orientation: from-image;
        }

        button,
        input,
        select,
        textarea {
            color: inherit;
            font: inherit;
        }

        input[type="checkbox"],
        input[type="radio"] {
            line-height: normal;
            padding: 0px;
        }

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }

        #write h1,
        #write h2,
        #write h3,
        #write h4,
        #write h5,
        #write h6,
        #write p,
        #write pre {
            width: inherit;
        }

        #write h1,
        #write h2,
        #write h3,
        #write h4,
        #write h5,
        #write h6,
        #write p {
            position: relative;
        }

        p {
            line-height: inherit;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            break-after: avoid-page;
            break-inside: avoid;
            orphans: 4;
        }

        p {
            orphans: 4;
        }

        h1 {
            font-size: 2rem;
        }

        h2 {
            font-size: 1.8rem;
        }

        h3 {
            font-size: 1.6rem;
        }

        h4 {
            font-size: 1.4rem;
        }

        h5 {
            font-size: 1.2rem;
        }

        h6 {
            font-size: 1rem;
        }

        .md-math-block,
        .md-rawblock,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .hidden {
            display: none;
        }

        .md-blockmeta {
            color: rgb(204, 204, 204);
            font-weight: 700;
            font-style: italic;
        }

        a {
            cursor: pointer;
        }

        sup.md-footnote {
            padding: 2px 4px;
            background-color: rgba(238, 238, 238, 0.7);
            color: rgb(85, 85, 85);
            border-radius: 4px;
            cursor: pointer;
        }

        sup.md-footnote a,
        sup.md-footnote a:hover {
            color: inherit;
            text-transform: inherit;
            text-decoration: inherit;
        }

        #write input[type="checkbox"] {
            cursor: pointer;
            width: inherit;
            height: inherit;
        }

        figure {
            overflow-x: auto;
            margin: 1.2em 0px;
            max-width: calc(100% + 16px);
            padding: 0px;
        }

        figure>table {
            margin: 0px;
        }

        tr {
            break-inside: avoid;
            break-after: auto;
        }

        thead {
            display: table-header-group;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0px;
            width: 100%;
            overflow: auto;
            break-inside: auto;
            text-align: left;
        }

        table.md-table td {
            min-width: 32px;
        }

        .CodeMirror-gutters {
            border-right: 0px;
            background-color: inherit;
        }

        .CodeMirror-linenumber {
            user-select: none;
        }

        .CodeMirror {
            text-align: left;
        }

        .CodeMirror-placeholder {
            opacity: 0.3;
        }

        .CodeMirror pre {
            padding: 0px 4px;
        }

        .CodeMirror-lines {
            padding: 0px;
        }

        div.hr:focus {
            cursor: none;
        }

        #write pre {
            white-space: pre-wrap;
        }

        #write.fences-no-line-wrapping pre {
            white-space: pre;
        }

        #write pre.ty-contain-cm {
            white-space: normal;
        }

        .CodeMirror-gutters {
            margin-right: 4px;
        }

        .md-fences {
            font-size: 0.9rem;
            display: block;
            break-inside: avoid;
            text-align: left;
            overflow: visible;
            white-space: pre;
            background: inherit;
            position: relative !important;
        }

        .md-fences-adv-panel {
            width: 100%;
            margin-top: 10px;
            text-align: center;
            padding-top: 0px;
            padding-bottom: 8px;
            overflow-x: auto;
        }

        #write .md-fences.mock-cm {
            white-space: pre-wrap;
        }

        .md-fences.md-fences-with-lineno {
            padding-left: 0px;
        }

        #write.fences-no-line-wrapping .md-fences.mock-cm {
            white-space: pre;
            overflow-x: auto;
        }

        .md-fences.mock-cm.md-fences-with-lineno {
            padding-left: 8px;
        }

        .CodeMirror-line,
        twitterwidget {
            break-inside: avoid;
        }

        .footnotes {
            opacity: 0.8;
            font-size: 0.9rem;
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .footnotes+.footnotes {
            margin-top: 0px;
        }

        .md-reset {
            margin: 0px;
            padding: 0px;
            border: 0px;
            outline: 0px;
            vertical-align: top;
            background: 0px 0px;
            text-decoration: none;
            text-shadow: none;
            float: none;
            position: static;
            width: auto;
            height: auto;
            white-space: nowrap;
            cursor: inherit;
            -webkit-tap-highlight-color: transparent;
            line-height: normal;
            font-weight: 400;
            text-align: left;
            box-sizing: content-box;
            direction: ltr;
        }

        li div {
            padding-top: 0px;
        }

        blockquote {
            margin: 1rem 0px;
        }

        li .mathjax-block,
        li p {
            margin: 0.5rem 0px;
        }

        li blockquote {
            margin: 1rem 0px;
        }

        li {
            margin: 0px;
            position: relative;
        }

        blockquote> :last-child {
            margin-bottom: 0px;
        }

        blockquote> :first-child,
        li> :first-child {
            margin-top: 0px;
        }

        .footnotes-area {
            color: rgb(136, 136, 136);
            margin-top: 0.714rem;
            padding-bottom: 0.143rem;
            white-space: normal;
        }

        #write .footnote-line {
            white-space: pre-wrap;
        }

        @media print {

            body,
            html {
                border: 1px solid transparent;
                height: 99%;
                break-after: avoid;
                break-before: avoid;
                font-variant-ligatures: no-common-ligatures;
            }

            #write {
                margin-top: 0px;
                padding-top: 0px;
                border-color: transparent !important;
            }

            .typora-export * {
                -webkit-print-color-adjust: exact;
            }

            .typora-export #write {
                break-after: avoid;
            }

            .typora-export #write::after {
                height: 0px;
            }

            .is-mac table {
                break-inside: avoid;
            }

            .typora-export-show-outline .typora-export-sidebar {
                display: none;
            }
        }

        .footnote-line {
            margin-top: 0.714em;
            font-size: 0.7em;
        }

        a img,
        img a {
            cursor: pointer;
        }

        pre.md-meta-block {
            font-size: 0.8rem;
            min-height: 0.8rem;
            white-space: pre-wrap;
            background: rgb(204, 204, 204);
            display: block;
            overflow-x: hidden;
        }

        p>.md-image:only-child:not(.md-img-error) img,
        p>img:only-child {
            display: block;
            margin: auto;
        }

        #write.first-line-indent p>.md-image:only-child:not(.md-img-error) img {
            left: -2em;
            position: relative;
        }

        p>.md-image:only-child {
            display: inline-block;
            width: 100%;
        }

        #write .MathJax_Display {
            margin: 0.8em 0px 0px;
        }

        .md-math-block {
            width: 100%;
        }

        .md-math-block:not(:empty)::after {
            display: none;
        }

        .MathJax_ref {
            fill: currentcolor;
        }

        [contenteditable="true"]:active,
        [contenteditable="true"]:focus,
        [contenteditable="false"]:active,
        [contenteditable="false"]:focus {
            outline: 0px;
            box-shadow: none;
        }

        .md-task-list-item {
            position: relative;
            list-style-type: none;
        }

        .task-list-item.md-task-list-item {
            padding-left: 0px;
        }

        .md-task-list-item>input {
            position: absolute;
            top: 0px;
            left: 0px;
            margin-left: -1.2em;
            margin-top: calc(1em - 10px);
            border: none;
        }

        .math {
            font-size: 1rem;
        }

        .md-toc {
            min-height: 3.58rem;
            position: relative;
            font-size: 0.9rem;
            border-radius: 10px;
        }

        .md-toc-content {
            position: relative;
            margin-left: 0px;
        }

        .md-toc-content::after,
        .md-toc::after {
            display: none;
        }

        .md-toc-item {
            display: block;
            color: rgb(65, 131, 196);
        }

        .md-toc-item a {
            text-decoration: none;
        }

        .md-toc-inner:hover {
            text-decoration: underline;
        }

        .md-toc-inner {
            display: inline-block;
            cursor: pointer;
        }

        .md-toc-h1 .md-toc-inner {
            margin-left: 0px;
            font-weight: 700;
        }

        .md-toc-h2 .md-toc-inner {
            margin-left: 2em;
        }

        .md-toc-h3 .md-toc-inner {
            margin-left: 4em;
        }

        .md-toc-h4 .md-toc-inner {
            margin-left: 6em;
        }

        .md-toc-h5 .md-toc-inner {
            margin-left: 8em;
        }

        .md-toc-h6 .md-toc-inner {
            margin-left: 10em;
        }

        @media screen and (max-width: 48em) {
            .md-toc-h3 .md-toc-inner {
                margin-left: 3.5em;
            }

            .md-toc-h4 .md-toc-inner {
                margin-left: 5em;
            }

            .md-toc-h5 .md-toc-inner {
                margin-left: 6.5em;
            }

            .md-toc-h6 .md-toc-inner {
                margin-left: 8em;
            }
        }

        a.md-toc-inner {
            font-size: inherit;
            font-style: inherit;
            font-weight: inherit;
            line-height: inherit;
        }

        .footnote-line a:not(.reversefootnote) {
            color: inherit;
        }

        .md-attr {
            display: none;
        }

        .md-fn-count::after {
            content: ".";
        }

        code,
        pre,
        samp,
        tt {
            font-family: var(--monospace);
        }

        kbd {
            margin: 0px 0.1em;
            padding: 0.1em 0.6em;
            font-size: 0.8em;
            color: rgb(36, 39, 41);
            background: rgb(255, 255, 255);
            border: 1px solid rgb(173, 179, 185);
            border-radius: 3px;
            box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset;
            white-space: nowrap;
            vertical-align: middle;
        }

        .md-comment {
            color: rgb(162, 127, 3);
            opacity: 0.6;
            font-family: var(--monospace);
        }

        code {
            text-align: left;
            vertical-align: initial;
        }

        a.md-print-anchor {
            white-space: pre !important;
            border-width: initial !important;
            border-style: none !important;
            border-color: initial !important;
            display: inline-block !important;
            position: absolute !important;
            width: 1px !important;
            right: 0px !important;
            outline: 0px !important;
            background: 0px 0px !important;
            text-decoration: initial !important;
            text-shadow: initial !important;
        }

        .os-windows.monocolor-emoji .md-emoji {
            font-family: "Segoe UI Symbol", sans-serif;
        }

        .md-diagram-panel>svg {
            max-width: 100%;
        }

        [lang="flow"] svg,
        [lang="mermaid"] svg {
            max-width: 100%;
            height: auto;
        }

        [lang="mermaid"] .node text {
            font-size: 1rem;
        }

        table tr th {
            border-bottom: 0px;
        }

        video {
            max-width: 100%;
            display: block;
            margin: 0px auto;
        }

        iframe {
            max-width: 100%;
            width: 100%;
            border: none;
        }

        .highlight td,
        .highlight tr {
            border: 0px;
        }

        mark {
            background: rgb(255, 255, 0);
            color: rgb(0, 0, 0);
        }

        .md-html-inline .md-plain,
        .md-html-inline strong,
        mark .md-inline-math,
        mark strong {
            color: inherit;
        }

        .md-expand mark .md-meta {
            opacity: 0.3 !important;
        }

        mark .md-meta {
            color: rgb(0, 0, 0);
        }

        @media print {

            .typora-export h1,
            .typora-export h2,
            .typora-export h3,
            .typora-export h4,
            .typora-export h5,
            .typora-export h6 {
                break-inside: avoid;
            }
        }

        .md-diagram-panel .messageText {
            stroke: none !important;
        }

        .md-diagram-panel .start-state {
            fill: var(--node-fill);
        }

        .md-diagram-panel .edgeLabel rect {
            opacity: 1 !important;
        }

        .md-fences.md-fences-math {
            font-size: 1em;
        }

        .md-fences-advanced:not(.md-focus) {
            padding: 0px;
            white-space: nowrap;
            border: 0px;
        }

        .md-fences-advanced:not(.md-focus) {
            background: inherit;
        }

        .typora-export-show-outline .typora-export-content {
            max-width: 1440px;
            margin: auto;
            display: flex;
            flex-direction: row;
        }

        .typora-export-sidebar {
            width: 300px;
            font-size: 0.8rem;
            margin-top: 80px;
            margin-right: 18px;
        }

        .typora-export-show-outline #write {
            --webkit-flex: 2;
            flex: 2 1 0%;
        }

        .typora-export-sidebar .outline-content {
            position: fixed;
            top: 0px;
            max-height: 100%;
            overflow: hidden auto;
            padding-bottom: 30px;
            padding-top: 60px;
            width: 300px;
        }

        @media screen and (max-width: 1024px) {

            .typora-export-sidebar,
            .typora-export-sidebar .outline-content {
                width: 240px;
            }
        }

        @media screen and (max-width: 800px) {
            .typora-export-sidebar {
                display: none;
            }
        }

        .outline-content li,
        .outline-content ul {
            margin-left: 0px;
            margin-right: 0px;
            padding-left: 0px;
            padding-right: 0px;
            list-style: none;
        }

        .outline-content ul {
            margin-top: 0px;
            margin-bottom: 0px;
        }

        .outline-content strong {
            font-weight: 400;
        }

        .outline-expander {
            width: 1rem;
            height: 1.42857rem;
            position: relative;
            display: table-cell;
            vertical-align: middle;
            cursor: pointer;
            padding-left: 4px;
        }

        .outline-expander::before {
            content: "";
            position: relative;
            font-family: Ionicons;
            display: inline-block;
            font-size: 8px;
            vertical-align: middle;
        }

        .outline-item {
            padding-top: 3px;
            padding-bottom: 3px;
            cursor: pointer;
        }

        .outline-expander:hover::before {
            content: "";
        }

        .outline-h1>.outline-item {
            padding-left: 0px;
        }

        .outline-h2>.outline-item {
            padding-left: 1em;
        }

        .outline-h3>.outline-item {
            padding-left: 2em;
        }

        .outline-h4>.outline-item {
            padding-left: 3em;
        }

        .outline-h5>.outline-item {
            padding-left: 4em;
        }

        .outline-h6>.outline-item {
            padding-left: 5em;
        }

        .outline-label {
            cursor: pointer;
            display: table-cell;
            vertical-align: middle;
            text-decoration: none;
            color: inherit;
        }

        .outline-label:hover {
            text-decoration: underline;
        }

        .outline-item:hover {
            border-color: rgb(245, 245, 245);
            background-color: var(--item-hover-bg-color);
        }

        .outline-item:hover {
            margin-left: -28px;
            margin-right: -28px;
            border-left: 28px solid transparent;
            border-right: 28px solid transparent;
        }

        .outline-item-single .outline-expander::before,
        .outline-item-single .outline-expander:hover::before {
            display: none;
        }

        .outline-item-open>.outline-item>.outline-expander::before {
            content: "";
        }

        .outline-children {
            display: none;
        }

        .info-panel-tab-wrapper {
            display: none;
        }

        .outline-item-open>.outline-children {
            display: block;
        }

        .typora-export .outline-item {
            padding-top: 1px;
            padding-bottom: 1px;
        }

        .typora-export .outline-item:hover {
            margin-right: -8px;
            border-right: 8px solid transparent;
        }

        .typora-export .outline-expander::before {
            content: "+";
            font-family: inherit;
            top: -1px;
        }

        .typora-export .outline-expander:hover::before,
        .typora-export .outline-item-open>.outline-item>.outline-expander::before {
            content: "−";
        }

        .typora-export-collapse-outline .outline-children {
            display: none;
        }

        .typora-export-collapse-outline .outline-item-open>.outline-children,
        .typora-export-no-collapse-outline .outline-children {
            display: block;
        }

        .typora-export-no-collapse-outline .outline-expander::before {
            content: "" !important;
        }

        .typora-export-show-outline .outline-item-active>.outline-item .outline-label {
            font-weight: 700;
        }

        .md-inline-math-container mjx-container {
            zoom: 0.95;
        }


        :root {
            --side-bar-bg-color: #fafafa;
            --control-text-color: #777;
        }

        @include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

        /* open-sans-regular - latin-ext_latin */
        /* open-sans-italic - latin-ext_latin */
        /* open-sans-700 - latin-ext_latin */
        /* open-sans-700italic - latin-ext_latin */
        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
            color: rgb(51, 51, 51);
            line-height: 1.6;
        }

        #write {
            max-width: 860px;
            margin: 0 auto;
            padding: 30px;
            padding-bottom: 100px;
        }

        @media only screen and (min-width: 1400px) {
            #write {
                max-width: 1024px;
            }
        }

        @media only screen and (min-width: 1800px) {
            #write {
                max-width: 1200px;
            }
        }

        #write>ul:first-child,
        #write>ol:first-child {
            margin-top: 30px;
        }

        a {
            color: #4183C4;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            position: relative;
            margin-top: 1rem;
            margin-bottom: 1rem;
            font-weight: bold;
            line-height: 1.4;
            cursor: text;
        }

        h1:hover a.anchor,
        h2:hover a.anchor,
        h3:hover a.anchor,
        h4:hover a.anchor,
        h5:hover a.anchor,
        h6:hover a.anchor {
            text-decoration: none;
        }

        h1 tt,
        h1 code {
            font-size: inherit;
        }

        h2 tt,
        h2 code {
            font-size: inherit;
        }

        h3 tt,
        h3 code {
            font-size: inherit;
        }

        h4 tt,
        h4 code {
            font-size: inherit;
        }

        h5 tt,
        h5 code {
            font-size: inherit;
        }

        h6 tt,
        h6 code {
            font-size: inherit;
        }

        h1 {
            font-size: 2.25em;
            line-height: 1.2;
            border-bottom: 1px solid #eee;
        }

        h2 {
            font-size: 1.75em;
            line-height: 1.225;
            border-bottom: 1px solid #eee;
        }

        /*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

        h3 {
            font-size: 1.5em;
            line-height: 1.43;
        }

        h4 {
            font-size: 1.25em;
        }

        h5 {
            font-size: 1em;
        }

        h6 {
            font-size: 1em;
            color: #777;
        }

        p,
        blockquote,
        ul,
        ol,
        dl,
        table {
            margin: 0.8em 0;
        }

        li>ol,
        li>ul {
            margin: 0 0;
        }

        hr {
            height: 2px;
            padding: 0;
            margin: 16px 0;
            background-color: #e7e7e7;
            border: 0 none;
            overflow: hidden;
            box-sizing: content-box;
        }

        li p.first {
            display: inline-block;
        }

        ul,
        ol {
            padding-left: 30px;
        }

        ul:first-child,
        ol:first-child {
            margin-top: 0;
        }

        ul:last-child,
        ol:last-child {
            margin-bottom: 0;
        }

        blockquote {
            border-left: 4px solid #dfe2e5;
            padding: 0 15px;
            color: #777777;
        }

        blockquote blockquote {
            padding-right: 0;
        }

        table {
            padding: 0;
            word-break: initial;
        }

        table tr {
            border: 1px solid #dfe2e5;
            margin: 0;
            padding: 0;
        }

        table tr:nth-child(2n),
        thead {
            background-color: #f8f8f8;
        }

        table th {
            font-weight: bold;
            border: 1px solid #dfe2e5;
            border-bottom: 0;
            margin: 0;
            padding: 6px 13px;
        }

        table td {
            border: 1px solid #dfe2e5;
            margin: 0;
            padding: 6px 13px;
        }

        table th:first-child,
        table td:first-child {
            margin-top: 0;
        }

        table th:last-child,
        table td:last-child {
            margin-bottom: 0;
        }

        .CodeMirror-lines {
            padding-left: 4px;
        }

        .code-tooltip {
            box-shadow: 0 1px 1px 0 rgba(0, 28, 36, .3);
            border-top: 1px solid #eef2f2;
        }

        .md-fences,
        code,
        tt {
            border: 1px solid #e7eaed;
            background-color: #f8f8f8;
            border-radius: 3px;
            padding: 0;
            padding: 2px 4px 0px 4px;
            font-size: 0.9em;
        }

        code {
            background-color: #f3f4f4;
            padding: 0 2px 0 2px;
        }

        .md-fences {
            margin-bottom: 15px;
            margin-top: 15px;
            padding-top: 8px;
            padding-bottom: 6px;
        }


        .md-task-list-item>input {
            margin-left: -1.3em;
        }

        @media print {
            html {
                font-size: 13px;
            }

            table,
            pre {
                page-break-inside: avoid;
            }

            pre {
                word-wrap: break-word;
            }
        }

        .md-fences {
            background-color: #f8f8f8;
        }

        #write pre.md-meta-block {
            padding: 1rem;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f7f7f7;
            border: 0;
            border-radius: 3px;
            color: #777777;
            margin-top: 0 !important;
        }

        .mathjax-block>.code-tooltip {
            bottom: .375rem;
        }

        .md-mathjax-midline {
            background: #fafafa;
        }

        #write>h3.md-focus:before {
            left: -1.5625rem;
            top: .375rem;
        }

        #write>h4.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        #write>h5.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        #write>h6.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        .md-image>.md-meta {
            /*border: 1px solid #ddd;*/
            border-radius: 3px;
            padding: 2px 0px 0px 4px;
            font-size: 0.9em;
            color: inherit;
        }

        .md-tag {
            color: #a7a7a7;
            opacity: 1;
        }

        .md-toc {
            margin-top: 20px;
            padding-bottom: 20px;
        }

        .sidebar-tabs {
            border-bottom: none;
        }

        #typora-quick-open {
            border: 1px solid #ddd;
            background-color: #f8f8f8;
        }

        #typora-quick-open-item {
            background-color: #FAFAFA;
            border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
            border-style: solid;
            border-width: 1px;
        }

        /** focus mode */
        .on-focus-mode blockquote {
            border-left-color: rgba(85, 85, 85, 0.12);
        }

        header,
        .context-menu,
        .megamenu-content,
        footer {
            font-family: "Segoe UI", "Arial", sans-serif;
        }

        .file-node-content:hover .file-node-icon,
        .file-node-content:hover .file-node-open-state {
            visibility: visible;
        }

        .mac-seamless-mode #typora-sidebar {
            background-color: #fafafa;
            background-color: var(--side-bar-bg-color);
        }

        .md-lang {
            color: #b4654d;
        }

        /*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

        #md-notification .btn {
            border: 0;
        }

        .dropdown-menu .divider {
            border-color: #e5e5e5;
            opacity: 0.4;
        }

        .ty-preferences .window-content {
            background-color: #fafafa;
        }

        .ty-preferences .nav-group-item.active {
            color: white;
            background: #999;
        }

        .menu-item-container a.menu-style-btn {
            background-color: #f5f8fa;
            background-image: linear-gradient(180deg, hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0));
        }
    </style>
    <title>基地节点指南</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link rel="stylesheet" href="../new/standard.css">
</head>
<div>转载自：</div>
<div class="cardBox">
    <a class="cardInside" href="http://pkuit.com/forum.php?mod=viewthread&tid=204443&extra=page%3D1" target="_blank">
        <div class="cardText">
            <p class="cardTitle">【教程】基地节点指南1.0</p>
            <p class="cardBrief">基地节点这个东西嘛……至少我自己是从刚学做任务时就开始用，但十年以来都是马马虎虎的使用，从未深究过里面的细节。最近终于有了点想法，想要把自己已经知道的各种特性进行系统的整理，出一份比较完善的教程。
                以前应该是从来没有过基地节点方面的教程，因此我只能和tslza一起，以大量测试为基础，在不断的摸索与碰壁之中，试图将单人任务中AI作战方造建筑的逻辑整理完全。希望我们的努力能帮到更多人吧。</p>
            <p class="cardSrc">http://pkuit.com/forum.php?mod=viewthread&tid=204443&extra=page%3D1</p>
            <p class="cardStatus"><span><i class="fas fa-user"></i><span>竹蜻蜓（Heli）</span></span><span><i
                        class="fas fa-clock"></i><span>2021-1-28</span></span></p>
        </div>
        <div class="cardImg">
<img src="https://ra2gonglue-1257584316.cos.ap-beijing.myqcloud.com/mijizhizuo/%E3%80%90%E6%95%99%E7%A8%8B%E3%80%91%E5%9F%BA%E5%9C%B0%E8%8A%82%E7%82%B9%E6%8C%87%E5%8D%971.0k.jpg" alt="">
        </div>
    </a>
</div>
<hr>
<body class='typora-export os-windows'>
    <div class='typora-export-content'>
        <div id='write' class=''>


            <h1 id='基地节点指南11'><span>基地节点指南1.1</span></h1>
            <p><span>
                    基地节点这个东西嘛……至少我自己是从刚学做任务时就开始用，但十年以来都是马马虎虎的使用，从未深究过里面的细节。最近终于有了点想法，想要把自己已经知道的各种特性进行系统的整理，出一份比较完善的教程。</span>
            </p>
            <p><span>
                    以前应该是从来没有过基地节点方面的教程，因此我只能和tslza一起，以大量测试为基础，在不断的摸索与碰壁之中，试图将单人任务中AI作战方造建筑的逻辑整理完全。希望我们的努力能帮到更多人吧。</span>
            </p>
            <p><span>——竹蜻蜓（主笔），2021.1.28</span></p>
            <p><strong><span>目录</span></strong></p>
            <p><span> </span><strong><span>0 -</span></strong><span> </span><strong><span>基地节点是什么</span></strong></p>
            <p><span> </span><strong><span>1 -</span></strong><span> </span><strong><span>基地节点的建造条件</span></strong></p>
            <p><span> </span><strong><span>2 -</span></strong><span> </span><strong><span>基地节点的建造顺序</span></strong></p>
            <p><span> </span><strong><span>3 -</span></strong><span> </span><strong><span>基地节点的自动移位</span></strong></p>
            <p><span> </span><strong><span>4 -</span></strong><span> </span><strong><span>自动建设基地模式</span></strong></p>
            <p><span> </span><strong><span>5 -</span></strong><span> </span><strong><span>基地节点的插队</span></strong></p>
            <p><span> </span><strong><span>6 -</span></strong><span> </span><strong><span>建筑的生产与摆放</span></strong></p>
            <p><span> </span><strong><span>7 -</span></strong><span> </span><strong><span>战术延伸</span></strong></p>
            <p><span> </span><strong><span>8 -</span></strong><span> </span><strong><span>局限与滥用</span></strong></p>
            <p><span> </span><strong><span>附录：基地节点存储结构解析</span></strong></p>
            <p><span> </span><strong><span>附录：与基地节点有关的触发与ini整理</span></strong></p>
            <p><strong><span>总结图</span></strong></p>
            <p><span>策划：竹蜻蜓，tslza</span></p>
            <p><span>审核：prry，轻稚，妖妖酱，蜜蜂狼牛</span></p>
            <h2 id='0---基地节点是什么'><span>0 - 基地节点是什么</span></h2>
            <p><span> </span><strong><span>基地节点</span></strong><span>（Base
                    Node），顾名思义，是基地建筑建设的“节点”。一般来说，它决定了单人任务中AI作战方要在某个特定的位置，建造某座特定的建筑。在地图编辑器FinalAlert中，基地节点被显示为建筑的虚影，表示“</span><strong><span>应该在这个位置，建造这样的一座建筑</span></strong><span>”。</span>
            </p>
            <p><img src="../img/基地节点指南_clip_image002.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>正常放置的建筑（左上）与基地节点“建筑的虚影”——基地节点（右下）</span></p>
            <p><span>
                    一个基地节点有且只有四个属性：</span><strong><span>所属方</span></strong><span>，</span><strong><span>序号</span></strong><span>，</span><strong><span>位置坐标</span></strong><span>，</span><strong><span>建筑类型</span></strong><span>。在FinalAlert的绘图窗口上，你可以直观的看到所属方的颜色、建筑类型和位置坐标，但序号是一个隐藏的属性。</span>
            </p>
            <p><span> 在FinalAlert中，我们使用左侧树状图中的“基地节点”（Base nodes）一栏的三个工具来编辑基地节点：</span></p>
            <p><span>l </span><strong><span>“建立节点不删除建筑”工具（Create node/Keep
                        Building）</span></strong><span>：使用该工具点击一座建筑物，会在该建筑物的位置产生一个基地节点，其建筑类型、所属方、位置坐标均与原建筑一致，并追加一个新的序号。</span>
            </p>
            <p><span>l </span><strong><span>“建立节点删除建筑”工具（Create node/Delete
                        Building）</span></strong><span>：使用该工具点击一座建筑物，会删除该建筑并产生一个基地节点，其建筑类型、所属方、位置坐标均与原建筑一致，并追加一个新的序号。</span>
            </p>
            <p><span>l </span><strong><span>“删除节点”工具（Delete node）</span></strong><span>：
                    使用该工具点击一个基地节点，会删除该基地节点。序号会前移补位。注意，使用树状图最底端的“删除对象”工具（Delete Object）是无法删除基地节点的。</span></p>
            <p><span>
                    由此我们也可以看到，在FinalAlert中，基地节点无法直接进行移动位置、更改建筑类型、更改所属方、更改序号的操作，只能通过删除，然后重新摆放建筑的方式来重新建立。在更改地图尺寸的时候，由于坐标系统发生了变化，基地节点的位置也会发生漂移——那么就需要删除它们，并重新摆放了。</span>
            </p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='1---基地节点的建造条件'><span>1 - 基地节点的建造条件</span></h2>
            <p><span>
                    关于基地节点建造的条件，用三个字就可以简短有力的描述：“</span><strong><span>无条件</span></strong><span>”。一旦设置了基地节点，那么AI作战方会无条件的尝试按照节点来建造——无视任何科技限制、延伸距离限制、建造数量限制，甚至在这个建筑根本不能造的情况下，把它给造出来！</span>
            </p>
            <p><span> 接下来笔者会用一个例子来展示这个“无条件”有多么暴力（左侧图片为在FinalAlert中的摆位，右侧图片为在实际游戏中经过足够长时间以后的最终效果）：</span></p>
            <p><img src="../img/基地节点指南_clip_image004.jpg"
                    referrerpolicy="no-referrer" alt="img"><span> </span><img
                    src="../img/基地节点指南_clip_image006.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><strong><span>无视建造距离限制</span></strong><span>：不论多远，只要是平地就能造；</span></p>
            <p><strong><span>无视科技限制</span></strong><span>：跳过所有前置科技，直接造出工业工厂；</span></p>
            <p><strong><span>无视建造数量限制</span></strong><span>：能造出2个甚至更多工业工厂；</span></p>
            <p><strong><span>无视这个建筑能不能造</span></strong><span>：直接造出科技钻油井、油桶、水塔等</span></p>
            <p><span>（由于这几种正常情况下不可造的建筑没有建造动画，</span></p>
            <p><span>AI作战方会以“直接凭空出现”的方式把它们造出来。）；</span></p>
            <p><span> </span></p>
            <p><span> AI作战方：我要造建筑！我要造建筑！！我要造建筑！！！没有人能拦着老子造建筑！！！！</span></p>
            <p><span>
                    事实上，一般只有两件事情能够拦住它：</span><strong><span>没建造厂</span></strong><span>，和</span><strong><span>没钱</span></strong><span>。钱在原版平台是一件用触发不太好控制的东西。所以，想要阻止AI作战方按照基地节点建造，操作性最强的办法还是拿掉它的建造厂。（另外，对于耗电建筑的基地节点，需要保证AI作战方电力充足，才能较为直接的建造出来。有关这部分的详细讨论，我们会在第5章进行。）</span>
            </p>
            <p><span> </span></p>
            <p><span> 触发结果</span><em><span>3 [生产开始]</span></em><span> 与基地节点的建造有一点点关系：如果作战方的IQ值低于 [IQ] →
                    Production=</span>
                <int><span>（原版为5），那么，不执行触发结果</span><em><span>3 [生产开始]</span></em><span>
                        ，AI作战方就不会自动开始按照基地节点建造建筑物。但如果作战方的IQ值高于或等于[IQ] → Production=</span>
                    <int><span>，那么即使没有执行这个触发结果，AI作战方仍然会开始建造。</span>
            </p>
            <p><span> 另外触发结果</span><em><span>30 [自动建设基地]</span></em><span> 对应的逻辑略微复杂一些，我们会在第4章进行讨论。</span></p>
            <p><span> </span></p>
            <p><span>
                    一般来说，AI作战方只会在一种情况下认为这个基地节点已经</span><strong><span>建立成功</span></strong><span>了：</span><strong><span>在基地节点的位置上，恰好有一座与之同种类的建筑</span></strong><span>。这座同种类的建筑可以是任何来源的：可能是自己按照基地节点造出来的，也可能是触发结果</span><em><span>125
                        [将建筑建于...]</span></em><span>
                    造出来的，也可能是地图上早就摆好的，或者甚至是AI作战方拿工程师占来的……都不影响AI作战方认为基地节点建立成功。（不过在第3章我们会介绍此条件的一个反例。）</span></p>
            <p><span> 基地节点与对应建筑的位置必须是完全对齐，有一点偏移都不行，否则不会判定为成功，甚至会把该建筑当作障碍，形成阻挡状态。</span></p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='2---基地节点的建造顺序'><span>2 - 基地节点的建造顺序</span></h2>
            <p><span> 基地节点的建造顺序与它的隐藏属性——</span><strong><span>序号</span></strong><span>密切相关。我们先聊聊序号的特性。</span></p>
            <p><span>
                    首先，基地节点的序号是一个3位数字（缺位用0补齐），从“000”开始由小到大排布；其次，基地节点的序号是按照所属方来存储的，每一个所属方都有着从“000”开始的、自己独享的一套序号。当然，这些性质在FinalAlert中都难以直观的看到，所以你也不必去特别的记忆。</span>
            </p>
            <p><span>
                    真正需要注意的是，FinalAlert中的三个基地节点编辑工具，“建立节点删除建筑”、“建立节点不删除建筑”只能在末尾追加新的序号，而“删除节点”在删除以后会让序号依次前移补位，这意味着</span><strong><span>在完全使用FinalAlert编辑基地节点时，同一个作战方的基地节点，一定是越后建立的，序号越大</span></strong><span>。因此，为了重新安排基地节点的序号，你可能不得不删除一个作战方的所有基地节点，重新进行设置。</span>
            </p>
            <p><span> </span></p>
            <p><span> AI作战方按照基地节点建造建筑的顺序，就是</span><strong><span>严格的按照序号由小到大而来的，没有任何的例外情况</span></strong><span>。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    种种情况表明，如果某个基地节点对应的建筑造不出来，整个作战方的所有基地节点会整体进入一种</span><strong><span>阻塞</span></strong><span>的状态——虽然有建造厂，也有足够的钱，但就因为这一个基地节点造不出来，导致后续的基地节点也全都造不出来。</span>
            </p>
            <p><span>
                    等等，不是无条件造吗，怎么会造不出来？这里的“造不出来”主要指的是</span><strong><span>阻挡</span></strong><span>（blockage）状态。阻挡可能是建造位置被障碍物挡住了，或者因为地形不适宜而放不下去，抑或基地节点本身在地图可视区域外，等等，总之就是EVA所说，“Cannot
                    Deploy Here”。</span></p>
            <p><span>
                    其实有一部分阻挡状态是可能可以由AI作战方自行解决的，就是基地节点的位置被AI自身或者盟友的单位堵住了的情况，这种情况被称为</span><strong><span>临时阻挡</span></strong><span>（temporary
                    blockage）。此时AI会尝试让附近的单位随机移动，看能不能凑巧把需要的建造空间让出来。AI作战方在这样“驱赶”附近的单位以后，会等待[General] →
                    PlacementDelay=</span>
                <float>
                    <span>（单位：分钟，原版值为0.05，即3秒）以后再尝试下一次放置。但毕竟是随机移动，可能经历了若干次随机移动也没能空出需要的位置。但由于MaximumBuildingPlacementFailures这句代码没有发挥应有的作用（根据原版注释，这条代码本意是让这种尝试进行一定次数就终止，但经测试</span><strong><span>这条代码在单人任务中没有任何实际作用</span></strong><span>），这种临时阻挡状态可能会永远持续下去，AI作战方的建筑生产就被卡死在这里，无法执行后续动作。</span>
            </p>
            <p><img src="../img/基地节点指南_clip_image007.png"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>临时阻挡永远持续下去的一种情形</span></p>
            <p><span>
                    不过这种情形算是一种很极端的状况。我们先默认临时阻挡都可以被AI自动解决，下文中提到的阻挡，都指的是另一种AI没法自主解决的状况——被敌方单位，或者被不能移动的玩意（建筑/围墙/石块/地形等）挡住，即</span><strong><span>永久阻挡</span></strong><span>（permanent
                    blockage）。这样的阻挡可就真的是无力回天了。此时AI作战方不会继续进行任何摆放建筑的尝试了，直接判定为</span><strong><span>建造失败</span></strong><span>。</span>
            </p>
            <p><span> 建造失败怎么办呢？接下来，AI作战方会执行下一章所讲的步骤——自动移位。</span></p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='3---基地节点的自动移位'><span>3 - 基地节点的自动移位</span></h2>
            <p><span> 我基地节点呢？我摆在这儿好好的基地节点呢？？AI还能给我移走了不成？？？</span></p>
            <p><span>
                    位置坐标是基地节点的属性中唯一一个可以在游戏的过程中被动态的改变的属性。上一章节我们还讨论了阻挡问题，</span><strong><span>当没被阻挡的时候，AI作战方会精确的在基地节点指示的位置造出特定的建筑，这样才算这个基地节点建造成功</span></strong><span>；但如果发生了阻挡，AI作战方在尝试原位放置无果后，有可能会把建筑放置在其它稀奇古怪的位置。本章会详细的讨论这种行为。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    首先，确实是基地节点本身被移动了，而并非是AI作战方在其它地方造出了与这个基地节点相关联的建筑。这个推论基于以下事实：当我们阻挡了AI作战方的基地节点，使需要造的建筑更换位置建造，然后手动解除阻挡以后（比如把堵在那个位置的单位移走），再摧毁刚刚AI作战方造出的建筑，让它再次重建。此后AI作战方重建的建筑，即使原位置已经没有了阻挡，仍然会造到更换过以后的位置，而非最初的基地节点位置。这就充分的证明，</span><strong><span>是基地节点本身的位置被永久的移动了</span></strong><span>。</span>
            </p>
            <p><span>
                    另外，基地节点被移动以后，其判定建造成功的条件出了一点小变化（在第8章局限5之中有推测其内部原理）：只有AI作战方按照这个基地节点的指示建立了建筑，这个基地节点才会被判定为建造成功。而其位置上有其它来源的对应建筑（比如说按照另一个与它重叠的基地节点而建立的，或者预先放在这里的，等等），都不会认为建造成功，甚至会被判定为发生了阻挡。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    接下来我们需要先介绍“</span><strong><span>基地中心</span></strong><span>”的概念：基地中心是每一个作战方独有的一个特定的坐标位置，AI在很多方面的位置判断、距离判断都会选择以这个坐标为中心。比如，从工厂生产出来的无指令单位都会先在这个坐标附近待命，动作脚本中的“在基地附近集结”（Gather
                    at Base）的位置也会和这个坐标有关联。当然，今天仅讨论它在基地节点方面的用途。</span></p>
            <p><span>
                    基地中心默认是自动计算的，而自动计算的规则非常简单粗暴：取</span><strong><span>该作战方所有建筑的坐标平均值作为基地中心</span></strong><span>。这个位置不一定在己方的建筑附近，甚至不一定能造建筑。在单人任务中，AI作战方的势力分布是相当复杂的：有可能整张地图上都有它的防御建筑，但实际上基地的核心生产建筑只集中在一个角落区域；或者，AI作战方的势力分布在两大块，把一片水域夹在中间，等等……总之，除非你把基地摆成均匀的一坨，否则自动计算的基地中心都很有可能落到古怪的位置上。这时，我们就需要手动干涉基地中心的位置，告诉AI作战方“自己基地的主要部分在哪里”，这是非常必要的。</span>
            </p>
            <p><span> 如何干涉呢？基地中心的坐标是可以用触发强行设置的。</span><strong><span>触发结果</span><span>*</span><span>137
                        [基地中心单元设置]</span><span>*</span><span>
                        可以把某个作战方的基地中心强行的设置到某个路径点的位置</span></strong><span>，而对应的，触发结果</span><em><span>138
                        [基地中心单元清除]</span></em><span>
                    可以取消触发设置的基地中心位置，返回自动计算的状态（然而几乎不会用到，一般任务中哪有让AI举家搬迁的？）。这使得我们可以手动设置基地中心的位置了。</span></p>
            <p><span> 刚刚说了这么多，那么在基地节点方面，基地中心的意义就在于：</span><strong><span>某个基地节点被阻挡以后，
                        AI作战方会把该基地节点移动到基地中心位置上</span></strong><span>。（无视基地中心是否真的能建造建筑，也无视基地中心有无其它的基地节点，只会不偏不倚的恰好落在这个坐标上）</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    接下来笔者会用一个例子展示这种机制形成的阻挡和阻塞现象。左图中，基地中心被触发强制设置在了左下角的98号路径点，而图上放置了3个磁能反应炉基地节点+1个作战实验室基地节点，共4个基地节点。其中基地节点000、001被围墙阻挡，002、003没有被阻挡。AI作战方金钱充足，IQ为5足够。</span>
            </p>
            <p><img src="../img/基地节点指南_clip_image009.jpg"
                    referrerpolicy="no-referrer" alt="img"><span> </span><img
                    src="../img/基地节点指南_clip_image011.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>
                    在右图展示的实际建设情况中，AI作战方会首先尝试建造000号基地节点。发现阻挡以后，AI会直接把000号基地节点移动到基地中心（即98号路径点位置）。此时基地中心没有被阻挡，于是AI作战方顺利的在此造出一座磁能反应炉，基地节点000号建造成功。</span>
            </p>
            <p><span>
                    然后轮到了001号基地节点：由于001号基地节点也被围墙阻挡了，AI会在尝试建造失败以后，把001号基地节点也移到基地中心上。但此处已经有一座造好的磁能反应炉了。由于被移动的节点只有AI作战方按照它建立建筑时才判定成功，因此001号节点被000号节点造出的磁能反应炉所阻挡，建造失败。</span>
            </p>
            <p><span>
                    至于002和003？由于001建造失败，基地节点的建造在这里被阻塞了，根本轮不到002和003去建造。于是，在这个例子中，AI有4个基地节点，但只会造出000号对应的一个磁能反应炉然后卡死。</span>
            </p>
            <p><span> </span></p>
            <p><span> 按照这种逻辑，被阻挡的基地节点，在反复尝试失败以后，都应该被移动到了到了基地中心，相互重叠，导致只能在基地中心造出一个建筑，然后形成阻塞，最后AI被卡到无法生产任何建筑。</span></p>
            <p><span>
                    可是有时也有人会看到，在这样设置下的AI，在被阻挡的情况下，仍然</span><strong><span>可能</span></strong><span>会造出多个建筑，这是为什么呢？因为自动计算得到的基地中心并不是静态的，而是随着地图上建筑的变化，这个坐标平均值也会不断的更新。尤其，在玩家摧毁敌人一大片建筑时，这个平均坐标就会受到显著影响，发生可观的变化，从而导致有一些基地节点被凑巧移动到了能造出来的位置（典型的现象是造出许多占地1×1的防御塔）。</span><strong><span>是基地中心在变，才导致基地节点被自动移位的位置变化的！</span></strong><span>（当然如果你使用触发锁定了基地中心位置，那就真的最多只能造出一个建筑了）</span>
            </p>
            <p><span> 但是这种移动只能说是“凑巧”
                    ——它仍然非常的死板，而且一般造不出多少建筑，不足以让AI作战方恢复完整的科技和生产能力。而且最后把自己卡到无法生产任何建筑的结果，使其行为更像是一种“主动求死”而不是“垂死挣扎”（把基地中心锁在己方建造厂上形成永久阻挡，死也不把生产建筑留给玩家占领，等玩家工程师过来再把建造厂卖了）。有时我们需要更加灵活的基地节点建造方式，这就要靠在下一章我们介绍的内容了。</span>
            </p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='4---自动建设基地模式'><span>4 - 自动建设基地模式</span></h2>
            <p><span>
                    上一章说到，AI作战方在基地节点受到阻挡时，其重新选择位置的方式非常死板，几乎一定会卡死自己。但大家也应该知道，遭遇战AI在建筑被卡位的时候，却没有这样的表现。看来我们需要向遭遇战取取经，研究一下遭遇战所使用的</span><strong><span>自动建设基地</span></strong><span>模式。</span>
            </p>
            <p><span> 触发结果</span><em><span>30 [自动建设基地]</span></em><span>
                    是这个模式的开关，单人任务中，它默认是关着的，而遭遇战中默认是打开的。那么，如果在单人任务中启用它，AI就会像遭遇战中那样自动生产建筑吗？</span></p>
            <p><span>
                    测试结果是，在地图上没有任何该作战方的基地节点时，确实是如此的，AI作战方真的会像遭遇战中一样自动的生产建筑；但一旦地图上有了已经摆好的基地节点，哪怕只有1个，AI都会严格的按照基地节点来进行生产，同时，在发生阻挡的时候，AI建造建筑的行为也发生了细微的变化……</span>
            </p>
            <p><span>
                </span><strong><span>表象1：</span></strong><span>AI作战方有建造厂，地图上已经有手工放置的基地节点时，打开自动建设基地模式，AI作战方会按照建造基地节点的指示建造建筑，不会多造。并且，在建造位置被阻挡以后，它们会在建造厂附近以类似遭遇战的摆位造出来，数量上是完全对应的。</span>
            </p>
            <p><span>
                </span><strong><span>表象2：</span></strong><span>AI作战方原本有建造厂，地图上原本没有手工放置的基地节点，打开自动建设基地模式。摧毁AI作战方的建造厂，并在另一个位置重新给它一辆基地车并展开，此时AI会在之前被摧毁的那座建造厂位置，凭空再造出一个建造厂。（想想为什么？）</span>
            </p>
            <p><span> </span></p>
            <p><span> 种种迹象表明，自动建设基地模式和基地节点有着非常紧密的联系。其实，自动建设基地模式有以下两个功能：</span></p>
            <p><span>
                </span><strong><span>功能1：</span></strong><span>在AI作战方没有基地节点时，</span><strong><span>自动产生一系列基地节点</span></strong><span>（如果地图上已经有了该作战方的基地节点，则不会产生）。产生的000号基地节点一定是本阵营建造厂，且和地图上已有的建造厂位置重叠，往后则按照科技树进行产生（在rules的[AI]章节有若干条代码控制各类基地节点生成的数量和概率）。</span>
            </p>
            <p><span>
                </span><strong><span>功能2：</span></strong><span>把基地节点被阻挡时进行移位的移动规则，从“移动到基地中心那一点”改为“</span><strong><span>移动到建造厂附近的空地上</span></strong><span>（并且排布符合[AI]
                    → AIBaseSpacing=</span>
                <int><span>、[BuildingType] → WantsExtraSpace=&lt;yes/no&gt;等代码的指示）”。</span>
            </p>
            <p><span>
                    对于遭遇战AI，功能1决定了出建筑的种类和数量，而功能2决定了出建筑的位置。在单人任务中，功能1我们基本用不到，但功能2却极为实用，因为它可以有效的防止AI作战方的建筑生产线因为基地节点被阻挡而被卡死。换句话说，</span><strong><span>如果你使用了基地节点，还想让AI作战方在基地节点被阻挡的时候，聪明的更换位置建造，那请无脑打开该作战方的自动建设基地模式</span></strong><span>。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                </span><strong><span>注意1：</span></strong><span>自动建设基地模式下的基地节点移位规则变为“移动到建造厂附近的空地上”不可以理解为“基地中心在移动”。此时基地中心的位置仍然遵循着第3章所讲的规则而确定，并在其它方面（比如单位的集结地点）保留着自己的影响。</span>
            </p>
            <p><span>
                </span><strong><span>注意2：自动建设基地模式下，请尽量确保建造厂在地图内</span></strong><span>。如果建造厂不在地图内，AI作战方会从ID最高的建筑物开始延伸建筑，但是延伸的方式很奇怪：只会向一个特定的方向直线排开。这种情况姑且认为是游戏产生了bug，也很难加以利用。</span>
            </p>
            <p><span>
                </span><strong><span>注意3：</span></strong><span>在单人任务中，</span><strong><span>自动建设基地模式一经打开，其影响就会一直产生</span></strong><span>，可以理解为“</span><strong><span>关不掉了</span></strong><span>”。但是，我们可以通过反复重新“打开”，来刷新AI作战方所判定的建造厂位置。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    在任务之中，我们还会遇到一些AI作战方从一辆基地车开始白手起家建造基地的情形（有时甚至基地车的部署位置都不确定）。在这种情况下，是不是不得不使用自动建设基地模式的功能1呢？可以设想，这样做最大的缺陷有几个：</span>
            </p>
            <p><span>
                </span><strong><span>缺陷1</span></strong><span>：不好控制出同种建筑物的数量，比如说需要AI出3门巨炮（原版平台会因为这个很头疼，虽然在Ares下这并不是问题）。</span>
            </p>
            <p><span>
                </span><strong><span>缺陷2</span></strong><span>：为了限制AI不去建造某些建筑，可能需要修改一堆建筑的ini（AIBuildThis=no），一点点的封掉相关科技。</span>
            </p>
            <p><span>
                </span><strong><span>缺陷3</span></strong><span>：由于自动建设基地生成的第一个基地节点一定是建造厂，在基地中心没有对准的状态下，AI可能会凭空造出另一个建造厂（即刚才提到的</span><strong><span>表象2</span></strong><span>。这是个致命问题，在AI基地部署位置不确定时很常见）。</span>
            </p>
            <p><span>
                </span><strong><span>缺陷4</span></strong><span>：尤里的AI会自动生成奴隶矿场的基地节点，导致不停的补奴隶矿场。（在原版平台的单人任务模式，收成车辆状态的奴隶矿场不会被计入建筑总数。这是一个bug）</span>
            </p>
            <p><span> 但既然基地部署位置不确定，我们还需要AI自动的进行建筑布局，不需要我们事先把所有基地节点位置摆好。此时，我们可以利用基地节点移位的性质，制作一个伪·遭遇战自动建设基地模式。</span></p>
            <p><span>
                    方法很简单：打开自动建设基地模式，手工提前放好基地节点（避开功能1），但是</span><strong><span>让所有的基地节点都被阻挡</span></strong><span>——比如，把所有基地节点都放在地图的可视区域外。AI会按照这些基地节点的序号，逐个的建造建筑，不多也不少，但AI在建造之前，会自动的把这些基地节点移动到建造厂附近的位置。这相当于，手动控制建造的建筑种类与顺序，但让AI自动选择位置。</span>
            </p>
            <p><span> </span></p>
            <p><span> 总结一下3、4章的内容，用最精简的语言概括一下，大概有这么两条：</span></p>
            <p><span> </span><strong><span>基地中心*</span></strong><span>*的计算规则：一般是所有建筑的坐标平均。也可用触发锁死其位置。**</span></p>
            <p><span>
                </span><strong><span>基地节点被阻挡以后的自动移位规则：如果开启了自动建设基地模式，则移动到建造厂附近的空地；如果没开，则移动到基地中心那个点上。</span></strong></p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='5---基地节点的插队'><span>5 - 基地节点的插队</span></h2>
            <p><span> 本章所探讨的现象，要从AI作战方电力不足时的保护机制说起。前文的所有讨论都是在“AI作战方电力充足”或者“生产的就是电厂”的状态下进行的，但电力不足的时候尝试生产耗电建筑会怎样呢？</span>
            </p>
            <p><span>
                    只有当AI作战方电力不足，且下一个基地节点需要它生产耗电建筑时（生产电厂或者不耗电建筑&lt;如机枪碉堡等&gt;则不受限制），AI作战方会表现出一种“试图先恢复电力”的行为：</span><strong><span>在耗电建筑的基地节点序号之前，先插入一个本阵营基础电厂的基地节点，而后面的基地节点的序号会依次向后移动</span></strong><span>。这形成的表象就是，AI作战方在生产这个建筑之前，要先补另一个建筑，因此称这种行为为</span><strong><span>插队</span></strong><span>。</span>
            </p>
            <p><span> “电力不足”有什么判定的细节吗？</span></p>
            <p><span>
                    只有保证建造完下一个耗电建筑以后，富余电力大于0（注意不含等于），AI作战方才会认为此时电力是充足的。也就是说，电力刚刚好足够的状况，AI作战方还是会尝试多补一个电厂。如果预测到在建造下一个建筑物以后电力会不足，此时AI作战方也会开始让电厂插队。另外，如果当前的电力不足状态是来自飞碟吸住电厂或者间谍断电这类强制断电方式，AI作战方不会判断“假如没有人给我强制断电，我的电力是否充足”，而是跳过电力相关的判断，不再让电厂插队，转而去直接生产后续的建筑物。</span>
            </p>
            <p><span>
                    这个新生成的电厂基地节点，位置是在哪里呢？答案是“就像它被阻挡了一样”：如果没有开启自动建设基地模式，那么这个节点就会生成在基地中心；如果开启了自动建设基地模式，则会生成在建造厂附近。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    在电厂插队以后，如果没有开启自动建设基地模式，而基地中心又被阻挡了，AI作战方的建筑生产就</span><strong><span>因为这个插队的电厂基地节点被阻挡，而导致其它建筑的生产被阻塞了</span></strong><span>，可以称其为</span><strong><span>电力阻塞</span></strong><span>。其表象就是：“为什么我的AI停电以后，就不按照基地节点补建筑了？”这也造成了部分教程误认为基地节点的生产需要电力充足的原因。</span>
            </p>
            <p><span>
                    我们无法禁用这种插队机制，只能选择去规避。为此，我们需要保证AI作战方的电力尽量自给自足；或者科学的安排基地节点的顺序，把电厂的基地节点排在前面；或者索性把自动建设基地模式打开，避免因阻挡造成的阻塞。</span>
            </p>
            <p><span> </span></p>
            <p><span> 电厂插队只是较为明显的一种插队机制，但应该还有其余的插队机制。有一种观点认为，遭遇战AI生产防御建筑的过程也有插队机制的一份功劳。由于本教程仅讨论单人任务，这里就不做深入的讨论了。</span>
            </p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='6---建筑的生产与摆放'><span>6 - 建筑的生产与摆放</span></h2>
            <p><span> 之前的章节都在讨论“AI作战方在没有干扰的情况下，经过足够长的时间以后，会把建筑造成什么样子”，都没有考虑建造过程中各个时段动态的干扰。在本章中，我们来重点讨论它。</span></p>
            <p><span>
                    在第2章提到，AI会按照基地节点的序号由小到大生产建筑，没有任何的例外情况。在没有被打扰的情况下，这件事情的正确性能够得到轻易的验证。然而，在实际游戏中，可能会出现AI作战方刚建造完一个建筑，玩家就把它摧毁了的状况。此时AI的生产顺序就有可能变得奇怪，就像遭遇战AI有时候能够跳过电厂直接生产矿厂，让玩家大呼AI作弊。</span>
            </p>
            <p><span>
                    种种迹象表明，</span><strong><span>AI作战方建筑物的生产和摆放是不同的两个过程</span></strong><span>：前者好比玩家在建造栏中点下一个建筑物，后者好比玩家从建造栏中把已经就绪了的建筑物放到地图上。虽然一个建筑的生产往后几乎必定伴随着摆放，而且</span><strong><span>二者都遵循基地节点序号从小到大的原则</span></strong><span>，但二者之间判定的时间差却容易搞出一点意料之外的事情。笔者会用两个例子展示这种现象：</span>
            </p>
            <p><span> 在第1个例子中，我们只关注000号磁能反应炉与001号磁能反应炉节点。</span></p>
            <p><img src="../img/基地节点指南_clip_image013.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><img src="../img/基地节点指南_clip_image015.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><img src="../img/基地节点指南_clip_image017.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>
                    一座磁能反应炉的正常建造时间约23秒。在游戏开始23秒以后，000号节点对应的磁能反应炉被成功建造出来。我们立即使用坦克将其摧毁。于是，在又过了23秒以后，又一座磁能反应炉被造在了000号节点的位置；然后再过23秒，下一座磁能反应炉被造在了001号节点的位置。</span>
            </p>
            <p><span> 第2个例子中，我们让001和002号节点的顺序变化一下，这次001为兵营节点：</span></p>
            <p><img src="../img/基地节点指南_clip_image019.jpg"
                    referrerpolicy="no-referrer" alt="img"><span> </span><img
                    src="../img/基地节点指南_clip_image021.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>
                    这次我们同样让000号节点的磁能反应炉建造出来以后被立刻摧毁。但这次，建造的顺序却发生了变化：接下来是19秒（兵营的正常建造时间）以后首先建造出了001号节点的兵营。这违背了“建造顺序一定是按照序号”吗？</span>
            </p>
            <p><span>
                    仔细想想也没有。第2个例子中，AI作战方在放下000号节点的磁能反应炉以后，显然是毫不犹豫的开始生产001号节点的兵营，才赶上了19秒的时间。只是在兵营放下的时候，地图上的建筑状况已经发生了变化，才导致这种看起来违背顺序的状态发生。</span>
            </p>
            <p><span>
                    那么第1个例子为什么又去补000号节点的磁能反应炉呢？看起来只有一种解释，就是：AI作战方实际上是因为要建造001号节点的磁能反应炉，才开始生产一座磁能反应炉的；但是在生产完成准备摆放的时候，由于000号节点没有完成，而且恰好这里需要一座磁能反应炉，因此刚生产好的这座磁能反应炉被摆放到了000号位置。这也符合第二个建造的磁能反应炉耗时是23秒的事实。AI作战方并没有因为地图上的建筑发生了变化，而变动自己正在生产的建筑。</span>
            </p>
            <p><span> </span></p>
            <p><span> 复杂情况下，我们可以认为AI作战方的生产与摆放遵循如下原则：</span></p>
            <p><span> </span><strong><span>生产：寻找序号最小的、未建立成功的基地节点，生产它对应的建筑</span></strong><span>。</span></p>
            <p><span> </span><strong><span>摆放：根据已经生产好的建筑，尝试把它摆放到序号最小的同类型的基地节点上</span></strong><span>。</span></p>
            <p><span> </span><strong><span>在生产与摆放过程之间，没有其它判定</span></strong><span>。</span></p>
            <p><span> 我们注意到这两个过程都遵循“序号最小”。这样看来，仍然是没有例外呢。</span></p>
            <p><span> </span></p>
            <p><span>
                    我们可以很容易的发现，</span><strong><span>阻挡的判定是在摆放那一瞬间才发生的</span></strong><span>。如果发生了阻挡，紧接下来的事情就是基地节点移位——基地节点被移位以后，待建造建筑的生产进度会从零开始重新计算（就好比，玩家把已经就绪了的建筑取消生产，再重新点下去）。通常，这样会导致耗费2倍的生产时间。</span>
            </p>
            <p><span>
                    我们前面所提到的阻塞状态，其实就是AI作战方的基地中心被阻挡，一个基地节点每次移位的时候都会被阻挡（虽然坐标没变，但也是“尝试移动”过了嘛），而每次移位都会重置生产进度，所以就一直在反复生产这一个建筑，但就是放置不下去。</span>
            </p>
            <p><span>
                    但是，当由序号更小的基地节点对应的建筑被摧毁的话，AI作战方就会在下一次移位以后，检查到更小的序号的基地节点没有建造成功，转而去生产更小序号基地节点对应的建筑。但是这不意味着阻塞解除了，因为</span><strong><span>比阻塞位置更高序号的基地节点可能永远也不会有机会生产了</span></strong><span>。如果000号基地节点被阻塞，那可就真的彻底无力回天了。</span>
            </p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='7---战术延伸'><span>7 - 战术延伸</span></h2>
            <p><span> 基地节点只有“重建基地”一种用途吗？本章我们会描述一种基地节点在单人任务中的活用方式：</span><strong><span>战术延伸</span></strong><span>。</span>
            </p>
            <p><span> 有时候我们需要AI作战方在特定的时候（通常由触发来控制）在某个地点生产一系列建筑。如果需要一瞬间把所有建筑生产完成，我们通常会使用触发结果</span><em><span>125
                        [将建筑建于...]</span></em><span>
                    来制作。但有的时候，我们就是需要AI作战方做出一点一点延伸建筑的行为：或是在一个区域逐步建立起防御，或是慢慢的把电厂和巨炮摆到玩家的家门口（如果直接在玩家的基地里面造巨炮是不是太作弊了XD）……这个时候，我们就需要基地节点来帮忙了。</span>
            </p>
            <p><span>
                    同一个AI作战方是一定会尝试无条件生产全部基地节点的，既然有生产能力，自己基地中使用基地节点来补建筑是不能断的。那么我们如何控制一部分基地节点在特定时候才启用呢？那当然是使用障眼法，</span><strong><span>使用同颜色的不同AI作战方，假装是同一个作战方</span></strong><span>就行了。</span>
            </p>
            <p><span> 我们来看一个实际制作的例子（取自尤里复仇原版任务，盟军07-脑死）：</span></p>
            <p><img src="../img/基地节点指南_clip_image023.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>
                    我们在游戏中看到的表象是，紫色的AI作战方会尝试去占领位于地图左下角的2个油井。如果占领成功，就会在其附近建造一系列的防御建筑、兵营与战车工厂，并出兵进行防御。油井丢失的时候，AI作战方也会放弃这块阵地。</span>
            </p>
            <p><span> 用FinalAlert打开一看，地图边界外，放置着这个作战方的建造厂呢。原来是不同的作战方，只是颜色相同罢了。</span></p>
            <p><span> </span></p>
            <p><span> 战术延伸一般有以下步骤：</span></p>
            <p><span>
                </span><strong><span>准备</span></strong><span>：准备一个同颜色的AI作战方，在地图边界外为它放置建造厂和适宜的电力。设置其IQ=4，或者采用“先把建造厂调成其它所属”等手段，使其先不开始生产。</span>
            </p>
            <p><span>
                </span><strong><span>启动与执行</span></strong><span>：在合适的时机，使用触发让这个AI作战方开始生产，后面的动作就由它自行完成了。这个同颜色的AI作战方会在地图内按照它自己的基地节点建造一系列建筑。</span>
            </p>
            <p><span>
                </span><strong><span>放弃</span></strong><span>：或是没有达成某种目标，或是经历了一段时间，总之就是需要结束这种自动补充建筑的状态（由于建造厂实际上并不在地图上，让玩家来亲自摧毁几乎是不可能的了）。可以使用触发直接摧毁它的建造厂，或者让其变卖全部建筑来结束这次战术延伸。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    由于建造厂在地图边界以外，我们难以使用自动建设基地来进行布局，因此这种方式的建筑摆位一定是较为死板的，且容易被阻挡。为了让建筑队列不易阻塞，我们在摆放基地节点的时候，应该尽可能选择较少种类的建筑进行延伸——这样在后面被阻塞的建筑，是有很大可能被用来摆放到前面的基地节点上的。</span>
            </p>
            <p><span> </span></p>
            <p><span>
                    以上只是介绍了战术延伸的基本思路，但还有很多细节需要处理。主要是因为我们使用了一个障眼法：“看起来是同一个AI作战方，实际上是两个相同颜色的AI作战方。”查缺补漏主要围绕这里展开，请读者在使用的时候自行完成，本教程就不赘述了。</span>
            </p>
            <p><span> </span></p>
            <p><span> </span></p>
            <h2 id='8---局限与滥用'><span>8 - 局限与滥用</span></h2>
            <p><span> 基地节点有着强大的功能，但它又有着一定的局限性。另外，如果滥用基地节点，可能会带来极差的游戏体验。本章会主要叙述这两方面的问题。</span></p>
            <p><span> 本章的内容较为零碎，主要都是一些细碎的坑点，希望大家有耐心看完。</span></p>
            <p><span> </span></p>
            <p><strong><span>局限1：</span></strong><span>单人任务中，基地节点生产出来的建筑，AI作战方是不会自动使用小扳手进行修理的。</span></p>
            <p><span> NMD，WSM，凭什么遭遇战AI就会</span></p>
            <p><span> 顺便，触发结果</span><em><span>125 [将建筑建于...]</span></em><span>
                    造出来的建筑也是不会自动使用小扳手的。这两点几乎是无解的，即使解决了也有很大副作用。</span></p>
            <p><span> </span></p>
            <p><strong><span>局限2：</span></strong><span>如果一个AI作战方有</span><strong><span>多座建造厂</span></strong><span>，那么会产生很多种异常状态。</span>
            </p>
            <p><span>
                    和AI作战方拥有多座战车工厂就会从每个战车工厂中同时生产相同的坦克一样，当AI作战方拥有多座建造厂，就会每次同时生产若干座相同的建筑。要是同类建筑有很多对应的基地节点还好，AI作战方会尝试按照生产与放置的规则，尝试逐个把已经生产完成的建筑放置在基地节点上。可是当所有同类基地节点都已建立成功，AI作战方却还有生产完的建筑没有放置的时候，AI作战方就会尝试插队生成新的基地节点，尽力把所有建筑放置下去——这通常都会造成阻塞。</span>
            </p>
            <p><span>
                    而且，当某座基地节点上的建筑被摧毁时，AI尝试补建筑的时候，也是每次补好几座。经过不断的摧毁→补建筑→插队的循环以后，这种类型的基地节点可能会越来越多。当然，一般AI作战方不会真的造出一大堆同类建筑，因为在此之前早就产生阻塞了……</span>
            </p>
            <p><span> （不过，在Ares中，可以通过一条全局语句关闭这个多工厂生产功能，上面的问题也就不存在了。）</span></p>
            <p><span> 另外，自动建设基地模式下，如果有多座建造厂，还有一个灵魂难题：究竟该选择哪座建造厂作为基地节点移位的中心？
                    的测试显示，在建造厂的数量变化以后，第一次使用触发结果</span><em><span>30 [自动建设基地] - 打开</span></em><span>
                    以后，基地节点移位的中心会转移到最晚出现的一座建造厂的位置；但在此后再次或者更多次的使用触发结果</span><em><span>30 [自动建设基地] - 打开</span></em><span>
                    ，基地节点移位的中心又会转移到最早出现的建造厂位置。这是一个十分迷惑的结果，而且因为多倍建造建筑的原因，在实际制作中也难以进行利用。</span></p>
            <p><span>
                    综上所述，应该避免在需要AI作战方生产建筑的状态下，给AI作战方多个建造厂。如果实在有在地图上摆多个建造厂的需求，可以使用若干个相互结盟的AI作战方，每个建造厂各属于一个作战方，以规避各种问题。</span>
            </p>
            <p><span> </span></p>
            <p><strong><span>局限3：</span></strong><span>在FinalAlert中，无图像的建筑，其基地节点是隐形的。</span></p>
            <p><span>
                    当一个建筑没有图像，或者因为mix打包问题在FinalAlert中不显示图像，请尽量避免使用它的基地节点——无图像的建筑好歹有个线框，可它的基地节点就真的啥都没有，完全看不到了……对于玩家来说可能不是个问题，但这个特性可能在任务制作过程中，为制作者带来不必要的困扰。</span>
            </p>
            <p><span> </span></p>
            <p><strong><span>局限4：</span></strong><span>当你用基地节点造围墙……</span></p>
            <p><span> 在地图上设置围墙的基地节点来让AI作战方自动建造围墙是可以的。遭遇战AI也会根据[BuildingType] →
                    ProtectWithWall=&lt;yes/no&gt;的设置，决定是否要在一座建筑物周围自动生成一圈围墙的基地节点。</span></p>
            <p><img src="../img/基地节点指南_clip_image025.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>自动生成的围墙基地节点大概是这样的</span></p>
            <p><span> AI作战方是可以正常的判定围墙建立成功的，可是，由于围墙“自动连接”的性质，这一圈基地节点产生的实际效果就很可能十分迷惑……</span></p>
            <p><img src="../img/基地节点指南_clip_image027.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span>AI补围墙常态</span></p>
            <p><span>你看看你都保护了个什么玩意儿啊.jpg</span></p>
            <p><span>还把中间要保护的建筑阻挡到换位置了</span></p>
            <p><span>（想想为什么？提示：生产围墙但未摆放的过程中，中间建筑被毁了）</span></p>
            <p><span> 而如果只在围墙的四个角放置围墙基地节点，在围墙中间被打断一截的时候，AI作战方就不会补。</span></p>
            <p><span> 除了用于保护唯一建造厂的最后一圈围墙防线，只要它保护的建筑可能被端掉，其它地方的补围墙几乎总是不会十全十美。综上，请尽量避免使用基地节点补围墙，即使必须要使用，也应该十分谨慎。</span>
            </p>
            <p><span> </span></p>
            <p><strong><span>局限5：</span></strong><span>重叠的基地节点</span></p>
            <p><span> 应该避免在地图上主动摆放重叠的基地节点，即使打开了自动建设基地模式。</span></p>
            <p><span>
                    基于部分测试的结果，我们推测，被阻挡的基地节点可能被临时存储在了一个特定的位置（强烈怀疑是坐标(0,0)），然后才会执行移位的。这会导致重叠的基地节点几乎总是被同时移位，但对其余情况来说表现都正常。</span>
            </p>
            <p><span> 由于不推荐这么做，本教程也对此不做太多讨论。</span></p>
            <p><span> </span></p>
            <p><strong><span>滥用1：</span></strong><span>过多的基地节点。</span></p>
            <p><span>
                    从前面的讨论中，我们可以看出，基地节点的阻塞是一种非常容易发生的现象，而且在发生以后几乎无法补救。这一点在使用过多的基地节点时尤为明显。在一些早期的任务中，你会看到有些作者把地图上几乎所有敌方建筑都放上了基地节点，导致AI作战方在被阻挡的时候，在自己的基地中心建造一大堆的建筑，甚至可能把通行路线都堵住，造成更多后续的卡顿。</span>
            </p>
            <p><span>
                </span><strong><span>而虽然有这么多的基地节点，但因为一直在阻塞，实际上没有起到多少补充建筑的作用</span></strong><span>。这就是一种单纯降低游戏体验的滥用。</span>
            </p>
            <p><span>
                    笔者认为，一个作战方的基地节点，只应被用来补充一片小区域内的建筑物，比如敌人基地的核心区域、延伸路线，或者分基地，等等。虽然理论上你可以设置相当多的基地节点，但仍然建议控制数量，不要多用。</span>
            </p>
            <p><span> </span></p>
            <p><strong><span>滥用2：</span></strong><span>顺序不合理的基地节点。</span></p>
            <p><span> 关于基地节点的顺序有多重要，还要再次强调一遍。</span></p>
            <p><span>
                    同样是很多早期任务犯的毛病：在地图上设置基地节点的时候，就用“建立节点不删除建筑”工具瞎胡乱描一通，描到谁就是谁；然后在实际游戏中，造着造着就阻塞了……但要知道，通过按照一定原则，合理的规划基地节点的顺序，是可以尽量的规避阻塞的。</span>
            </p>
            <p><span>
                </span><strong><span>原则1：</span></strong><span>“不卡电”——尽量确保AI按基地节点建造的时候，不会电力不足，避免触发电厂插队机制，这种机制十分容易引起阻塞。</span>
            </p>
            <p><span>
                </span><strong><span>原则2：</span></strong><span>“由内而外”——靠近建造厂的建筑，基地节点的序号应当更小。这种设置是基于基地外围、离建造厂较远的建筑更加容易被玩家的阻挡的事实（一旦玩家打到建造厂面前，那么，已经可以不用再努力了.jpg）。这样设置以后，即使外围基地节点被阻塞了，仍然可以补内圈的建筑。</span>
            </p>
            <p><span>
                </span><strong><span>原则3：</span></strong><span>“内重外轻”——重要的、数量少的建筑放置在基地内部，数量多的建筑可以往基地外围放。这样可以尽量确保关键建筑较晚被阻塞。</span>
            </p>
            <p><span> </span></p>
            <h2 id='附录基地节点存储结构解析'><span>附录：基地节点存储结构解析</span></h2>
            <p><span> 基地节点被直接存储在每个作战方（House）的ini字段下，如[Russians House]。存储的格式为：</span></p>
            <p><span>[序号]=[建筑类型],[X坐标],[Y坐标]</span></p>
            <p><span>
                </span><strong><span>序号：</span></strong><span>一个3位数字（缺位用0补齐），从“000”开始由小到大排布。显然，一个作战方的基地节点最多1000个，序号从000到999（绝对足够用）。</span>
            </p>
            <p><span> </span><strong><span>建筑类型：</span></strong><span>建筑的注册名。</span></p>
            <p><span> </span><strong><span>X*</span></strong><span>*坐标、Y坐标：**整数，代表基地节点的位置。</span></p>
            <p><span> 除此之外，每个作战方字段下还有NodeCount=</span>
                <int>
                    <span>属性与基地节点相关：NodeCount表示基地节点的总数量，一般等于基地节点的最高序号加1（因为基地节点是从000号开始的）。序号高于NodeCount减1的基地节点都不会被游戏所读取。</span>
            </p>
            <p><span> 一般来说，我们在FinalAlert中编辑基地节点时，FinalAlert会帮我们自动维护这些参数，用不上制作者手动进行修改。</span></p>
            <p><span> </span></p>
            <p><span> 但一旦需要使用记事本打开地图修改基地节点，你就要注意以下事项，确保游戏不会出错：</span></p>
            <p><span> </span><strong><span>注意1</span></strong><span>：基地节点的序号必须从000开始由小到大逐个排布，不能有跳跃。否则游戏会在载入阶段报错。</span>
            </p>
            <p><span> </span><strong><span>注意2：</span></strong><span>NodeCount的数量必须小于或等于基地节点的最高序号加1。否则游戏会在载入阶段报错。</span>
            </p>
            <p><span> 以上两种报错的EIP均为007C9B92，在调试的时候可以留意一下。</span></p>
            <p><span> </span></p>
            <h2 id='附录与基地节点有关的触发与ini整理'><span>附录：与基地节点有关的触发与ini整理</span></h2>
            <p><span> 本章节整理了大部分与基地节点有关的或者“看起来好像有关”的触发和ini，并明确其作用。</span></p>
            <p><span> 实际上无关但是被收录的状况会用红色标出。</span></p>
            <p><span> </span></p>
            <h3 id='触发结果部分'><span>触发结果部分</span></h3>
            <p><span> </span></p>
            <p><em><span>3 [**生产开始]</span></em></p>
            <p><span> 该AI作战方开始生产建筑和单位。（开了就关不掉）</span></p>
            <p><span> 当AI作战方的IQ大于[IQ] → Production=</span>
                <int><span>（原版值为5）时，即使不使用此触发，该AI作战方也会自动开始生产。若想达到“使用此触发控制AI开始生产，又不产生其它影响”的效果，可以把该AI的IQ值设为4。</span>
            </p>
            <p><span> </span></p>
            <p><em><span>30 [**自动建设基地]</span></em></p>
            <p><span> 开启或者关闭自动建设基地模式（不过实际上开了就关不掉）。</span></p>
            <p><span> 其余的更多细节建议阅读本教程第4章的详解。</span></p>
            <p><span> </span></p>
            <p><em><span>125 [**将建筑建于...]</span></em></p>
            <p><span> 为该作战方在指定路径点强行建造特定的建筑物。建筑会在一瞬间建立完成。如果该作战方不是玩家，还会在其上叠加播放其建造动画。</span></p>
            <p><span>
                    和基地节点的建造不同，使用触发建造建筑物会使阻挡的单位被强制瞬移到附近，阻挡的覆盖物（如围墙、沙袋、矿石等）直接消失。但是在遇到地形不合适的情况，或者其它建筑物、树木等的阻挡，则会建造失败。</span>
            </p>
            <p><span> 使用这个触发建造的建筑物因为不属于基地节点的判定，也不会移位。相比于基地节点，这种方式更适合一些单独的关键建筑物按时建造。</span></p>
            <p><span> </span></p>
            <p><em><span>137 [**基地中心单元设置]</span></em></p>
            <p><span> 将该作战方的基地中心位置锁定到特定的路径点位置上。</span></p>
            <p><span> </span></p>
            <p><em><span>138 [**基地中心单元清除]</span></em></p>
            <p><span> 将该作战方基地中心位置的锁定状态清除，回到自动按照所有建筑的坐标平均计算的状态。</span></p>
            <p><span> </span></p>
            <h3 id='全局ini部分'><span>全局ini部分</span></h3>
            <p><span> </span></p>
            <p><span>[General] → PlacementDelay=</span>
                <float>
            </p>
            <p><span> 填实数，单位为分钟。原版值为0.05，即3秒。</span></p>
            <p><span> 临时阻挡发生时，AI作战方每隔多久进行一次建造尝试（尝试驱离附近的己方和友方单位）。</span></p>
            <p><span> </span></p>
            <p><span>[General] → AIRestrictReplaceTime=</span>
                <int>
            </p>
            <p><span> 填整数，单位为帧。原版值为400，即26.67秒。</span></p>
            <p><span> （原版注释的解释）当AI的建筑物受损，AI会在接下来的这么长时间内只会补充电厂、防御建筑和围墙。经测试，本条代码疑似只对遭遇战生效。</span></p>
            <p><span> </span></p>
            <p><span>[General] → AINavalYardAdjacency=</span>
                <int>
            </p>
            <p><span> 填整数，单位为格。原版值为20。</span></p>
            <p><span> 自动建设基地模式下，AI船厂节点移位时，离建造厂的最远距离。船厂相对于其它建筑有着单独的距离判定规则，不受AIBaseSpacing影响。</span></p>
            <p><span> </span></p>
            <p><span>[General] → MaximumBuildingPlacementFailures=</span>
                <int>
            </p>
            <p><span> 填整数，单位为次。原版值为3。</span></p>
            <p><span> （原版注释的解释）临时阻挡发生时，AI尝试在原位建造建筑的最多次数，如果超过此次数，则进行移位。经测试，本条代码在单人任务中不会生效。</span></p>
            <p><span> </span></p>
            <p><span>[IQ] → Production=</span>
                <int>
            </p>
            <p><span> 填整数，无单位。原版值为5。</span></p>
            <p><span> 单人任务中，AI作战方的IQ大于或等于这个数值时，无需使用触发结果</span><em><span>3 [生产开始]</span></em><span> 也会自动开始生产。</span></p>
            <p><span> </span></p>
            <p><span>[AI] → AIBaseSpacing=</span>
                <int>
            </p>
            <p><span> 填整数，单位为格。原版值为1。</span></p>
            <p><span> 自动建设基地模式下，AI作战方自动选择建筑位置时，建筑之间所留的间距。不建议写比3更大的值。</span></p>
            <p><span> </span></p>
            <p><span>[AI] → PowerSurplus=</span>
                <int>
            </p>
            <p><span> 填整数，单位为电力。原版值为25</span></p>
            <p><span> （原版注释的解释）AI作战方确保自己要拥有这么多的富余电力。</span></p>
            <p><span> 实际测试中，看不出此条代码在单人任务中的作用：它不会影响电厂插队行为。</span></p>
            <p><span> </span></p>
            <p><span>[AI] → PowerEmergency=</span>
                <percentage>
            </p>
            <p><span> 填百分比。原版值为75%。</span></p>
            <p><span> （原版注释的解释）AI作战方在电力供应低于此比例时，会尝试变卖部分耗电建筑来恢复电力。</span></p>
            <p><span> 疑似只对遭遇战有效，且具体发生条件成谜。</span></p>
            <p><span> </span></p>
            <h3 id='对象ini部分'><span>对象ini部分</span></h3>
            <p><span> </span></p>
            <p><span>[BuildingType] → BaseNormal=&lt;yes/no&gt;</span></p>
            <p><span> 填yes或no。默认值为yes。</span></p>
            <p><span> 该建筑是否可以用于延伸建造。此条代码只对玩家有效。AI的建造建筑行为，无论是按照基地节点建造，还是在自动建设基地模式下，都会完全忽略此条代码。</span></p>
            <p><span> </span></p>
            <p><span>[BuildingType] → Adjacent=</span>
                <int>
            </p>
            <p><span> 填整数，单位为格。</span></p>
            <p><span>
                    该建筑的延伸距离，即它可以建造在其它BaseNormal=yes的建筑附近多远。此条代码只对玩家有效。AI的建造建筑行为，无论是按照基地节点建造，还是在自动建设基地模式下，都会完全忽略此条代码。对应的，在自动建设基地模式下，AI的建筑布局服从全局代码中的[AI]
                    → AIBaseSpacing=</span>
                <int><span>控制。</span>
            </p>
            <p><span> </span></p>
            <p><span>[BuildingType] → TechLevel=</span>
                <int>
            </p>
            <p><span> 填整数。</span></p>
            <p><span>
                    该建筑的科技等级。科技等级为“-1”，或者高于玩家等级时，玩家将不能建造该建筑物。AI在自动生成基地节点时，如果该建筑的科技等级高于自身的科技等级（如TechLevel=11），则不会生成。但是TechLevel=-1的时候还是会生成的。此条代码完全不影响已有基地节点的建造。</span>
            </p>
            <p><span> </span></p>
            <p><span>[BuildingType] → AIBuildThis=&lt;yes/no&gt;</span></p>
            <p><span> 填yes或no。默认值yes。</span></p>
            <p><span> AI在自动建设基地模式下自动生成基地节点时，是否会尝试生成此建筑物的基地节点。此条代码完全不影响已有基地节点的建造。</span></p>
            <p><span> </span></p>
            <p><span>[BuildingType] → WantsExtraSpace=&lt;yes/no&gt;</span></p>
            <p><span> 填yes或no。默认值no。</span></p>
            <p><span> AI在自动建设基地模式下进行自动排布建筑的基地节点位置时，是否为该建筑的基地节点准备更大的空间。简而言之就是，在发现某个建筑WantsExtraSpace=yes的时候，把[AI] →
                    AIBaseSpacing的判定暂时加1。但是不会影响后续的其它基地节点相对于这个建筑的排布。</span></p>
            <p><span> </span></p>
            <p><span>[BuildingType] → ProtectWithWall=&lt;yes/no&gt;</span></p>
            <p><span> 填yes或no。默认值no。</span></p>
            <p><span>在自动建设基地模式下自动生成基地节点的过程中，AI是否会在这个建筑周围生成一圈围墙的基地节点。建议和WantsExtraSpace配合使用。此条代码完全不影响已有基地节点的建造。</span>
            </p>
            <p><span> </span></p>
            <h2 id='总结图'><span>总结图</span></h2>
            <p><img src="../img/基地节点指南_clip_image029.jpg"
                    referrerpolicy="no-referrer" alt="img"></p>
            <p><span> </span></p>
            <p><span> </span></p>
            <p><span>发布链接：</span><a href='http://www.pkuit.com/forum.php?mod=viewthread&amp;tid=204443&amp;extra='
                    target='_blank' class='url'>http://www.pkuit.com/forum.php?mod=viewthread&tid=204443&extra=</a></p>
            <p><span>发帖作者：竹蜻蜓</span></p>
        </div>
    </div>
</body>

</html>